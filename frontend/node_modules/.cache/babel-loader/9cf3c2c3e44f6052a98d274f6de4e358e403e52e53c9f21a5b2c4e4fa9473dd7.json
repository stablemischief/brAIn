{"ast":null,"code":"import React,{useState,useMemo}from'react';import{motion}from'framer-motion';import{LightBulbIcon,ChartBarIcon,CurrencyDollarIcon,ClockIcon,CheckCircleIcon,ArrowRightIcon,SparklesIcon,Cog6ToothIcon,FireIcon,BoltIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const OptimizationCards=_ref=>{let{costData,historicalData,onImplementRecommendation,className=''}=_ref;const[filter,setFilter]=useState('all');const[category,setCategory]=useState('all');const[implementingIds,setImplementingIds]=useState(new Set());// Generate recommendations based on cost data\nconst recommendations=useMemo(()=>{const recs=[];// Model optimization recommendations\nif(costData.cost_by_model['gpt-4']&&costData.cost_by_model['gpt-4']>costData.total_cost*0.6){recs.push({id:'model-optimization-1',title:'Switch to GPT-3.5-turbo for Simple Tasks',description:'GPT-4 is being used for 60%+ of requests. Consider using GPT-3.5-turbo for simpler tasks like data extraction and basic analysis.',category:'model',priority:'high',potentialSavings:costData.cost_by_model['gpt-4']*0.3,savingsPercentage:30,complexity:'easy',timeToImplement:'1-2 hours',impact:'immediate',actionItems:['Audit current GPT-4 usage patterns','Identify tasks suitable for GPT-3.5-turbo','Implement model selection logic','Monitor quality metrics after switch'],metrics:{currentCost:costData.cost_by_model['gpt-4'],projectedCost:costData.cost_by_model['gpt-4']*0.7,affectedRequests:Math.floor(costData.token_usage.total_tokens*0.3/1000)}});}// Token usage optimization\nif(costData.token_usage.output_tokens>costData.token_usage.input_tokens*0.8){recs.push({id:'token-optimization-1',title:'Optimize Prompt Length and Output',description:'Output tokens are consuming significant costs. Optimize prompts to be more concise and limit response length.',category:'usage',priority:'medium',potentialSavings:costData.total_cost*0.15,savingsPercentage:15,complexity:'moderate',timeToImplement:'3-5 hours',impact:'short-term',actionItems:['Analyze prompt patterns for redundancy','Implement response length limits','Add prompt optimization guidelines','A/B test shorter prompts'],metrics:{currentCost:costData.total_cost,projectedCost:costData.total_cost*0.85,affectedRequests:Math.floor(costData.token_usage.total_tokens/1000)}});}// Caching recommendations\nconst repeatRequestRate=0.25;// Mock calculation\nif(repeatRequestRate>0.2){recs.push({id:'caching-1',title:'Implement Response Caching',description:'High repeat request rate detected. Implement caching for frequently requested analyses.',category:'caching',priority:'high',potentialSavings:costData.total_cost*0.25,savingsPercentage:25,complexity:'moderate',timeToImplement:'1-2 days',impact:'immediate',actionItems:['Set up Redis caching layer','Identify cacheable request patterns','Implement cache invalidation strategy','Monitor cache hit rates'],metrics:{currentCost:costData.total_cost,projectedCost:costData.total_cost*0.75,affectedRequests:Math.floor(costData.token_usage.total_tokens*0.25/1000)}});}// Scheduling optimization\nconst dailyVariance=historicalData.length>1?Math.max(...historicalData.map(d=>d.cost))/Math.min(...historicalData.map(d=>d.cost)):1;if(dailyVariance>2){recs.push({id:'scheduling-1',title:'Implement Off-Peak Processing',description:'High cost variance detected. Schedule batch processing during off-peak hours for cost savings.',category:'scheduling',priority:'medium',potentialSavings:costData.total_cost*0.12,savingsPercentage:12,complexity:'complex',timeToImplement:'2-3 days',impact:'long-term',actionItems:['Analyze usage patterns by time of day','Implement job queue system','Set up scheduled batch processing','Monitor cost patterns after implementation'],metrics:{currentCost:costData.total_cost,projectedCost:costData.total_cost*0.88,affectedRequests:Math.floor(costData.token_usage.total_tokens*0.3/1000)}});}// Architecture optimization\nrecs.push({id:'architecture-1',title:'Implement Request Batching',description:'Process multiple similar requests in batches to reduce per-request overhead and improve efficiency.',category:'architecture',priority:'low',potentialSavings:costData.total_cost*0.08,savingsPercentage:8,complexity:'complex',timeToImplement:'1 week',impact:'long-term',actionItems:['Design batch processing architecture','Implement request queuing system','Add batch size optimization logic','Test and validate batch processing'],metrics:{currentCost:costData.total_cost,projectedCost:costData.total_cost*0.92,affectedRequests:Math.floor(costData.token_usage.total_tokens/1000)}});return recs.sort((a,b)=>{const priorityOrder={high:3,medium:2,low:1};return priorityOrder[b.priority]-priorityOrder[a.priority]||b.potentialSavings-a.potentialSavings;});},[costData,historicalData]);// Filter recommendations\nconst filteredRecommendations=useMemo(()=>{return recommendations.filter(rec=>{const matchesPriority=filter==='all'||rec.priority===filter;const matchesCategory=category==='all'||rec.category===category;return matchesPriority&&matchesCategory;});},[recommendations,filter,category]);// Calculate total potential savings\nconst totalSavings=useMemo(()=>{return filteredRecommendations.reduce((sum,rec)=>sum+rec.potentialSavings,0);},[filteredRecommendations]);const handleImplement=async recommendationId=>{setImplementingIds(prev=>new Set([...prev,recommendationId]));try{await onImplementRecommendation(recommendationId);// Update recommendation as implemented\n}catch(error){console.error('Failed to implement recommendation:',error);}finally{setImplementingIds(prev=>{const next=new Set(prev);next.delete(recommendationId);return next;});}};const getPriorityColor=priority=>{switch(priority){case'high':return'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300';case'medium':return'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300';case'low':return'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300';}};const getCategoryIcon=category=>{switch(category){case'model':return SparklesIcon;case'usage':return ChartBarIcon;case'scheduling':return ClockIcon;case'caching':return BoltIcon;case'architecture':return Cog6ToothIcon;default:return LightBulbIcon;}};const getComplexityColor=complexity=>{switch(complexity){case'easy':return'text-green-600 dark:text-green-400';case'moderate':return'text-yellow-600 dark:text-yellow-400';case'complex':return'text-red-600 dark:text-red-400';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6 \".concat(className),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900 dark:text-white\",children:\"Cost Optimization Recommendations\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 mt-1\",children:[\"Potential savings: \",/*#__PURE__*/_jsxs(\"span\",{className:\"font-medium text-green-600 dark:text-green-400\",children:[\"$\",totalSavings.toFixed(2)]}),\" (\",filteredRecommendations.length,\" recommendations)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"select\",{value:filter,onChange:e=>setFilter(e.target.value),className:\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Priorities\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",children:\"High Priority\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",children:\"Medium Priority\"}),/*#__PURE__*/_jsx(\"option\",{value:\"low\",children:\"Low Priority\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:e=>setCategory(e.target.value),className:\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All Categories\"}),/*#__PURE__*/_jsx(\"option\",{value:\"model\",children:\"Model Optimization\"}),/*#__PURE__*/_jsx(\"option\",{value:\"usage\",children:\"Usage Optimization\"}),/*#__PURE__*/_jsx(\"option\",{value:\"scheduling\",children:\"Scheduling\"}),/*#__PURE__*/_jsx(\"option\",{value:\"caching\",children:\"Caching\"}),/*#__PURE__*/_jsx(\"option\",{value:\"architecture\",children:\"Architecture\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 text-blue-600 dark:text-blue-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-blue-700 dark:text-blue-300\",children:\"Total Savings\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1\",children:[\"$\",totalSavings.toFixed(2)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-red-50 dark:bg-red-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(FireIcon,{className:\"h-5 w-5 text-red-600 dark:text-red-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-red-700 dark:text-red-300\",children:\"High Priority\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-red-900 dark:text-red-100 mt-1\",children:recommendations.filter(r=>r.priority==='high').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-green-600 dark:text-green-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-green-700 dark:text-green-300\",children:\"Quick Wins\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-green-900 dark:text-green-100 mt-1\",children:recommendations.filter(r=>r.complexity==='easy').length})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(BoltIcon,{className:\"h-5 w-5 text-purple-600 dark:text-purple-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-purple-700 dark:text-purple-300\",children:\"Immediate Impact\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-purple-900 dark:text-purple-100 mt-1\",children:recommendations.filter(r=>r.impact==='immediate').length})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 gap-6\",children:filteredRecommendations.map((recommendation,index)=>{const Icon=getCategoryIcon(recommendation.category);const isImplementing=implementingIds.has(recommendation.id);return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:index*0.1},className:\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\",children:/*#__PURE__*/_jsx(Icon,{className:\"h-6 w-6 text-blue-600 dark:text-blue-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-semibold text-gray-900 dark:text-white\",children:recommendation.title}),/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 rounded-full text-xs font-medium \".concat(getPriorityColor(recommendation.priority)),children:recommendation.priority})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-4\",children:recommendation.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:\"Potential Savings\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-bold text-green-600 dark:text-green-400\",children:[\"$\",recommendation.potentialSavings.toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[recommendation.savingsPercentage,\"% reduction\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:\"Complexity\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium \".concat(getComplexityColor(recommendation.complexity)),children:recommendation.complexity}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:recommendation.timeToImplement})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:\"Impact\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400 capitalize\",children:recommendation.impact}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 dark:text-gray-400\",children:[recommendation.metrics.affectedRequests.toLocaleString(),\" requests\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:\"Cost Projection\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:[\"$\",recommendation.metrics.currentCost.toFixed(2),\" \\u2192 $\",recommendation.metrics.projectedCost.toFixed(2)]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-500 h-1 rounded-full\",style:{width:\"\".concat((1-recommendation.metrics.projectedCost/recommendation.metrics.currentCost)*100,\"%\")}})})]})]})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>handleImplement(recommendation.id),disabled:isImplementing||recommendation.implemented,className:\"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors \".concat(recommendation.implemented?'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300':'bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50'),children:[isImplementing?/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\"}):recommendation.implemented?/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-4 w-4\"}):/*#__PURE__*/_jsx(ArrowRightIcon,{className:\"h-4 w-4\"}),isImplementing?'Implementing...':recommendation.implemented?'Implemented':'Implement']})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 dark:border-gray-700 pt-4\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"text-sm font-medium text-gray-900 dark:text-white mb-3\",children:\"Implementation Steps:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-2\",children:recommendation.actionItems.map((item,itemIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1.5 h-1.5 rounded-full bg-blue-600 dark:bg-blue-400 flex-shrink-0 mt-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-400\",children:item})]},itemIndex))})]})]},recommendation.id);})}),filteredRecommendations.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center\",children:[/*#__PURE__*/_jsx(LightBulbIcon,{className:\"h-12 w-12 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 dark:text-white mb-2\",children:\"No recommendations match your filters\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400\",children:\"Try adjusting your priority or category filters to see more recommendations.\"})]})]});};export default OptimizationCards;","map":{"version":3,"names":["React","useState","useMemo","motion","LightBulbIcon","ChartBarIcon","CurrencyDollarIcon","ClockIcon","CheckCircleIcon","ArrowRightIcon","SparklesIcon","Cog6ToothIcon","FireIcon","BoltIcon","jsx","_jsx","jsxs","_jsxs","OptimizationCards","_ref","costData","historicalData","onImplementRecommendation","className","filter","setFilter","category","setCategory","implementingIds","setImplementingIds","Set","recommendations","recs","cost_by_model","total_cost","push","id","title","description","priority","potentialSavings","savingsPercentage","complexity","timeToImplement","impact","actionItems","metrics","currentCost","projectedCost","affectedRequests","Math","floor","token_usage","total_tokens","output_tokens","input_tokens","repeatRequestRate","dailyVariance","length","max","map","d","cost","min","sort","a","b","priorityOrder","high","medium","low","filteredRecommendations","rec","matchesPriority","matchesCategory","totalSavings","reduce","sum","handleImplement","recommendationId","prev","error","console","next","delete","getPriorityColor","getCategoryIcon","getComplexityColor","concat","children","toFixed","value","onChange","e","target","r","recommendation","index","Icon","isImplementing","has","div","initial","opacity","y","animate","transition","delay","toLocaleString","style","width","onClick","disabled","implemented","item","itemIndex"],"sources":["/Users/james/Documents/Product-RD/brAIn/frontend/src/components/Cost/OptimizationCards.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport {\n  LightBulbIcon,\n  ChartBarIcon,\n  CurrencyDollarIcon,\n  ClockIcon,\n  ExclamationTriangleIcon,\n  CheckCircleIcon,\n  ArrowRightIcon,\n  SparklesIcon,\n  Cog6ToothIcon,\n  FireIcon,\n  ShieldCheckIcon,\n  BoltIcon,\n} from '@heroicons/react/24/outline';\nimport { CostAnalytics, DailyCost } from '../../types';\n\ninterface OptimizationRecommendation {\n  id: string;\n  title: string;\n  description: string;\n  category: 'model' | 'usage' | 'scheduling' | 'caching' | 'architecture';\n  priority: 'high' | 'medium' | 'low';\n  potentialSavings: number;\n  savingsPercentage: number;\n  complexity: 'easy' | 'moderate' | 'complex';\n  timeToImplement: string;\n  impact: 'immediate' | 'short-term' | 'long-term';\n  actionItems: string[];\n  metrics: {\n    currentCost: number;\n    projectedCost: number;\n    affectedRequests: number;\n  };\n  implemented?: boolean;\n}\n\ninterface OptimizationCardsProps {\n  costData: CostAnalytics;\n  historicalData: DailyCost[];\n  onImplementRecommendation: (recommendationId: string) => Promise<void>;\n  className?: string;\n}\n\nexport const OptimizationCards: React.FC<OptimizationCardsProps> = ({\n  costData,\n  historicalData,\n  onImplementRecommendation,\n  className = '',\n}) => {\n  const [filter, setFilter] = useState<'all' | 'high' | 'medium' | 'low'>('all');\n  const [category, setCategory] = useState<'all' | OptimizationRecommendation['category']>('all');\n  const [implementingIds, setImplementingIds] = useState<Set<string>>(new Set());\n\n  // Generate recommendations based on cost data\n  const recommendations = useMemo<OptimizationRecommendation[]>(() => {\n    const recs: OptimizationRecommendation[] = [];\n\n    // Model optimization recommendations\n    if (costData.cost_by_model['gpt-4'] && costData.cost_by_model['gpt-4'] > costData.total_cost * 0.6) {\n      recs.push({\n        id: 'model-optimization-1',\n        title: 'Switch to GPT-3.5-turbo for Simple Tasks',\n        description: 'GPT-4 is being used for 60%+ of requests. Consider using GPT-3.5-turbo for simpler tasks like data extraction and basic analysis.',\n        category: 'model',\n        priority: 'high',\n        potentialSavings: costData.cost_by_model['gpt-4'] * 0.3,\n        savingsPercentage: 30,\n        complexity: 'easy',\n        timeToImplement: '1-2 hours',\n        impact: 'immediate',\n        actionItems: [\n          'Audit current GPT-4 usage patterns',\n          'Identify tasks suitable for GPT-3.5-turbo',\n          'Implement model selection logic',\n          'Monitor quality metrics after switch',\n        ],\n        metrics: {\n          currentCost: costData.cost_by_model['gpt-4'],\n          projectedCost: costData.cost_by_model['gpt-4'] * 0.7,\n          affectedRequests: Math.floor(costData.token_usage.total_tokens * 0.3 / 1000),\n        },\n      });\n    }\n\n    // Token usage optimization\n    if (costData.token_usage.output_tokens > costData.token_usage.input_tokens * 0.8) {\n      recs.push({\n        id: 'token-optimization-1',\n        title: 'Optimize Prompt Length and Output',\n        description: 'Output tokens are consuming significant costs. Optimize prompts to be more concise and limit response length.',\n        category: 'usage',\n        priority: 'medium',\n        potentialSavings: costData.total_cost * 0.15,\n        savingsPercentage: 15,\n        complexity: 'moderate',\n        timeToImplement: '3-5 hours',\n        impact: 'short-term',\n        actionItems: [\n          'Analyze prompt patterns for redundancy',\n          'Implement response length limits',\n          'Add prompt optimization guidelines',\n          'A/B test shorter prompts',\n        ],\n        metrics: {\n          currentCost: costData.total_cost,\n          projectedCost: costData.total_cost * 0.85,\n          affectedRequests: Math.floor(costData.token_usage.total_tokens / 1000),\n        },\n      });\n    }\n\n    // Caching recommendations\n    const repeatRequestRate = 0.25; // Mock calculation\n    if (repeatRequestRate > 0.2) {\n      recs.push({\n        id: 'caching-1',\n        title: 'Implement Response Caching',\n        description: 'High repeat request rate detected. Implement caching for frequently requested analyses.',\n        category: 'caching',\n        priority: 'high',\n        potentialSavings: costData.total_cost * 0.25,\n        savingsPercentage: 25,\n        complexity: 'moderate',\n        timeToImplement: '1-2 days',\n        impact: 'immediate',\n        actionItems: [\n          'Set up Redis caching layer',\n          'Identify cacheable request patterns',\n          'Implement cache invalidation strategy',\n          'Monitor cache hit rates',\n        ],\n        metrics: {\n          currentCost: costData.total_cost,\n          projectedCost: costData.total_cost * 0.75,\n          affectedRequests: Math.floor(costData.token_usage.total_tokens * 0.25 / 1000),\n        },\n      });\n    }\n\n    // Scheduling optimization\n    const dailyVariance = historicalData.length > 1 ? \n      Math.max(...historicalData.map(d => d.cost)) / Math.min(...historicalData.map(d => d.cost)) : 1;\n    \n    if (dailyVariance > 2) {\n      recs.push({\n        id: 'scheduling-1',\n        title: 'Implement Off-Peak Processing',\n        description: 'High cost variance detected. Schedule batch processing during off-peak hours for cost savings.',\n        category: 'scheduling',\n        priority: 'medium',\n        potentialSavings: costData.total_cost * 0.12,\n        savingsPercentage: 12,\n        complexity: 'complex',\n        timeToImplement: '2-3 days',\n        impact: 'long-term',\n        actionItems: [\n          'Analyze usage patterns by time of day',\n          'Implement job queue system',\n          'Set up scheduled batch processing',\n          'Monitor cost patterns after implementation',\n        ],\n        metrics: {\n          currentCost: costData.total_cost,\n          projectedCost: costData.total_cost * 0.88,\n          affectedRequests: Math.floor(costData.token_usage.total_tokens * 0.3 / 1000),\n        },\n      });\n    }\n\n    // Architecture optimization\n    recs.push({\n      id: 'architecture-1',\n      title: 'Implement Request Batching',\n      description: 'Process multiple similar requests in batches to reduce per-request overhead and improve efficiency.',\n      category: 'architecture',\n      priority: 'low',\n      potentialSavings: costData.total_cost * 0.08,\n      savingsPercentage: 8,\n      complexity: 'complex',\n      timeToImplement: '1 week',\n      impact: 'long-term',\n      actionItems: [\n        'Design batch processing architecture',\n        'Implement request queuing system',\n        'Add batch size optimization logic',\n        'Test and validate batch processing',\n      ],\n      metrics: {\n        currentCost: costData.total_cost,\n        projectedCost: costData.total_cost * 0.92,\n        affectedRequests: Math.floor(costData.token_usage.total_tokens / 1000),\n      },\n    });\n\n    return recs.sort((a, b) => {\n      const priorityOrder = { high: 3, medium: 2, low: 1 };\n      return priorityOrder[b.priority] - priorityOrder[a.priority] || b.potentialSavings - a.potentialSavings;\n    });\n  }, [costData, historicalData]);\n\n  // Filter recommendations\n  const filteredRecommendations = useMemo(() => {\n    return recommendations.filter(rec => {\n      const matchesPriority = filter === 'all' || rec.priority === filter;\n      const matchesCategory = category === 'all' || rec.category === category;\n      return matchesPriority && matchesCategory;\n    });\n  }, [recommendations, filter, category]);\n\n  // Calculate total potential savings\n  const totalSavings = useMemo(() => {\n    return filteredRecommendations.reduce((sum, rec) => sum + rec.potentialSavings, 0);\n  }, [filteredRecommendations]);\n\n  const handleImplement = async (recommendationId: string) => {\n    setImplementingIds(prev => new Set([...prev, recommendationId]));\n    try {\n      await onImplementRecommendation(recommendationId);\n      // Update recommendation as implemented\n    } catch (error) {\n      console.error('Failed to implement recommendation:', error);\n    } finally {\n      setImplementingIds(prev => {\n        const next = new Set(prev);\n        next.delete(recommendationId);\n        return next;\n      });\n    }\n  };\n\n  const getPriorityColor = (priority: OptimizationRecommendation['priority']) => {\n    switch (priority) {\n      case 'high':\n        return 'bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300';\n      case 'medium':\n        return 'bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300';\n      case 'low':\n        return 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300';\n    }\n  };\n\n  const getCategoryIcon = (category: OptimizationRecommendation['category']) => {\n    switch (category) {\n      case 'model':\n        return SparklesIcon;\n      case 'usage':\n        return ChartBarIcon;\n      case 'scheduling':\n        return ClockIcon;\n      case 'caching':\n        return BoltIcon;\n      case 'architecture':\n        return Cog6ToothIcon;\n      default:\n        return LightBulbIcon;\n    }\n  };\n\n  const getComplexityColor = (complexity: OptimizationRecommendation['complexity']) => {\n    switch (complexity) {\n      case 'easy':\n        return 'text-green-600 dark:text-green-400';\n      case 'moderate':\n        return 'text-yellow-600 dark:text-yellow-400';\n      case 'complex':\n        return 'text-red-600 dark:text-red-400';\n    }\n  };\n\n  return (\n    <div className={`space-y-6 ${className}`}>\n      {/* Header and Filters */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n        <div>\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n            Cost Optimization Recommendations\n          </h3>\n          <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n            Potential savings: <span className=\"font-medium text-green-600 dark:text-green-400\">\n              ${totalSavings.toFixed(2)}\n            </span> ({filteredRecommendations.length} recommendations)\n          </p>\n        </div>\n\n        <div className=\"flex items-center gap-3\">\n          {/* Priority Filter */}\n          <select\n            value={filter}\n            onChange={(e) => setFilter(e.target.value as typeof filter)}\n            className=\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          >\n            <option value=\"all\">All Priorities</option>\n            <option value=\"high\">High Priority</option>\n            <option value=\"medium\">Medium Priority</option>\n            <option value=\"low\">Low Priority</option>\n          </select>\n\n          {/* Category Filter */}\n          <select\n            value={category}\n            onChange={(e) => setCategory(e.target.value as typeof category)}\n            className=\"px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          >\n            <option value=\"all\">All Categories</option>\n            <option value=\"model\">Model Optimization</option>\n            <option value=\"usage\">Usage Optimization</option>\n            <option value=\"scheduling\">Scheduling</option>\n            <option value=\"caching\">Caching</option>\n            <option value=\"architecture\">Architecture</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Summary Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2\">\n            <CurrencyDollarIcon className=\"h-5 w-5 text-blue-600 dark:text-blue-400\" />\n            <span className=\"text-sm font-medium text-blue-700 dark:text-blue-300\">\n              Total Savings\n            </span>\n          </div>\n          <p className=\"text-2xl font-bold text-blue-900 dark:text-blue-100 mt-1\">\n            ${totalSavings.toFixed(2)}\n          </p>\n        </div>\n\n        <div className=\"bg-red-50 dark:bg-red-900/20 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2\">\n            <FireIcon className=\"h-5 w-5 text-red-600 dark:text-red-400\" />\n            <span className=\"text-sm font-medium text-red-700 dark:text-red-300\">\n              High Priority\n            </span>\n          </div>\n          <p className=\"text-2xl font-bold text-red-900 dark:text-red-100 mt-1\">\n            {recommendations.filter(r => r.priority === 'high').length}\n          </p>\n        </div>\n\n        <div className=\"bg-green-50 dark:bg-green-900/20 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2\">\n            <CheckCircleIcon className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\n            <span className=\"text-sm font-medium text-green-700 dark:text-green-300\">\n              Quick Wins\n            </span>\n          </div>\n          <p className=\"text-2xl font-bold text-green-900 dark:text-green-100 mt-1\">\n            {recommendations.filter(r => r.complexity === 'easy').length}\n          </p>\n        </div>\n\n        <div className=\"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4\">\n          <div className=\"flex items-center gap-2\">\n            <BoltIcon className=\"h-5 w-5 text-purple-600 dark:text-purple-400\" />\n            <span className=\"text-sm font-medium text-purple-700 dark:text-purple-300\">\n              Immediate Impact\n            </span>\n          </div>\n          <p className=\"text-2xl font-bold text-purple-900 dark:text-purple-100 mt-1\">\n            {recommendations.filter(r => r.impact === 'immediate').length}\n          </p>\n        </div>\n      </div>\n\n      {/* Recommendation Cards */}\n      <div className=\"grid grid-cols-1 gap-6\">\n        {filteredRecommendations.map((recommendation, index) => {\n          const Icon = getCategoryIcon(recommendation.category);\n          const isImplementing = implementingIds.has(recommendation.id);\n\n          return (\n            <motion.div\n              key={recommendation.id}\n              initial={{ opacity: 0, y: 20 }}\n              animate={{ opacity: 1, y: 0 }}\n              transition={{ delay: index * 0.1 }}\n              className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6\"\n            >\n              <div className=\"flex items-start justify-between mb-4\">\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg\">\n                    <Icon className=\"h-6 w-6 text-blue-600 dark:text-blue-400\" />\n                  </div>\n                  \n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <h4 className=\"text-lg font-semibold text-gray-900 dark:text-white\">\n                        {recommendation.title}\n                      </h4>\n                      <span className={`px-2 py-1 rounded-full text-xs font-medium ${getPriorityColor(recommendation.priority)}`}>\n                        {recommendation.priority}\n                      </span>\n                    </div>\n                    \n                    <p className=\"text-gray-600 dark:text-gray-400 mb-4\">\n                      {recommendation.description}\n                    </p>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4\">\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          Potential Savings\n                        </p>\n                        <p className=\"text-lg font-bold text-green-600 dark:text-green-400\">\n                          ${recommendation.potentialSavings.toFixed(2)}\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {recommendation.savingsPercentage}% reduction\n                        </p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          Complexity\n                        </p>\n                        <p className={`text-sm font-medium ${getComplexityColor(recommendation.complexity)}`}>\n                          {recommendation.complexity}\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {recommendation.timeToImplement}\n                        </p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          Impact\n                        </p>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400 capitalize\">\n                          {recommendation.impact}\n                        </p>\n                        <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                          {recommendation.metrics.affectedRequests.toLocaleString()} requests\n                        </p>\n                      </div>\n\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900 dark:text-white\">\n                          Cost Projection\n                        </p>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">\n                          ${recommendation.metrics.currentCost.toFixed(2)} → ${recommendation.metrics.projectedCost.toFixed(2)}\n                        </p>\n                        <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1\">\n                          <div \n                            className=\"bg-green-500 h-1 rounded-full\"\n                            style={{ width: `${(1 - recommendation.metrics.projectedCost / recommendation.metrics.currentCost) * 100}%` }}\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <button\n                  onClick={() => handleImplement(recommendation.id)}\n                  disabled={isImplementing || recommendation.implemented}\n                  className={`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${\n                    recommendation.implemented\n                      ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300'\n                      : 'bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50'\n                  }`}\n                >\n                  {isImplementing ? (\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent\" />\n                  ) : recommendation.implemented ? (\n                    <CheckCircleIcon className=\"h-4 w-4\" />\n                  ) : (\n                    <ArrowRightIcon className=\"h-4 w-4\" />\n                  )}\n                  {isImplementing ? 'Implementing...' : recommendation.implemented ? 'Implemented' : 'Implement'}\n                </button>\n              </div>\n\n              {/* Action Items */}\n              <div className=\"border-t border-gray-200 dark:border-gray-700 pt-4\">\n                <h5 className=\"text-sm font-medium text-gray-900 dark:text-white mb-3\">\n                  Implementation Steps:\n                </h5>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-2\">\n                  {recommendation.actionItems.map((item, itemIndex) => (\n                    <div key={itemIndex} className=\"flex items-center gap-2\">\n                      <div className=\"w-1.5 h-1.5 rounded-full bg-blue-600 dark:bg-blue-400 flex-shrink-0 mt-2\" />\n                      <span className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {item}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </motion.div>\n          );\n        })}\n      </div>\n\n      {filteredRecommendations.length === 0 && (\n        <div className=\"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-12 text-center\">\n          <LightBulbIcon className=\"h-12 w-12 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\n            No recommendations match your filters\n          </h3>\n          <p className=\"text-gray-600 dark:text-gray-400\">\n            Try adjusting your priority or category filters to see more recommendations.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default OptimizationCards;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}